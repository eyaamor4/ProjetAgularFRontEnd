<mat-sidenav-container>

  <!-- SIDENAV : seulement si connecté -->
  <mat-sidenav
    *ngIf="isLoggedIn()"
    #drawer
    fixedInViewport="true"
    mode="side"
    opened="true"
    style="width: 230px;">

    <mat-toolbar color="primary" fxLayout fxLayoutGap="16px">
      <mat-icon>school</mat-icon>
      <span>Laboratoire</span>
    </mat-toolbar>

    <mat-nav-list>

      <a mat-list-item routerLink="/dashboard">
        <mat-icon>dashboard</mat-icon>
        <span>Dashboard</span>
      </a>

      <ng-container *ngIf="isAdmin()">
        <a mat-list-item routerLink="/admin/members">
          <mat-icon>supervised_user_circle</mat-icon>
          <span>Members</span>
        </a>
        <a mat-list-item routerLink="/admin/tools">
          <mat-icon>settings</mat-icon>
          <span>Tools</span>
        </a>
        <a mat-list-item routerLink="/admin/events">
          <mat-icon>event_note</mat-icon>
          <span>Events</span>
        </a>
        <a mat-list-item routerLink="/admin/publications">
          <mat-icon>library_books</mat-icon>
          <span>Publications</span>
        </a>
      </ng-container>

      <ng-container *ngIf="isMember()">
        <a mat-list-item routerLink="/member/profile">
          <mat-icon>person</mat-icon>
          <span>Mon Profil</span>
        </a>
        <a mat-list-item routerLink="/member/publications">
          <mat-icon>library_books</mat-icon>
          <span>Mes Publications</span>
        </a>
        <a mat-list-item routerLink="/member/tools">
          <mat-icon>build</mat-icon>
          <span>Mes Outils</span>
        </a>
        <a mat-list-item routerLink="/member/events">
          <mat-icon>event</mat-icon>
          <span>Événements</span>
        </a>
      </ng-container>

    </mat-nav-list>
  </mat-sidenav>

  <!-- CONTENU PRINCIPAL -->
  <mat-sidenav-content>

    <!-- ✅ TOOLBAR TOUJOURS VISIBLE -->
   <mat-toolbar color="primary" style="display: flex; align-items: center;">
  <span>Laboratoire de Recherche</span>

  <!-- Espace flexible qui pousse tout à droite -->
  <div style="flex: 1;"></div>
  
  <!-- Section utilisateur - TOUT À DROITE -->
  <ng-container *ngIf="isLoggedIn()">
    <mat-icon style="margin-right: 8px;">account_circle</mat-icon>
    <span style="margin-right: 16px; white-space: nowrap;">{{ getUserName() }} ({{ getRole() }})</span>
    
    <button mat-stroked-button color="warn" (click)="logout()" style="display: flex; align-items: center; gap: 4px;">
      <mat-icon>logout</mat-icon>
      Déconnexion
    </button>
  </ng-container>
</mat-toolbar>

    <div class="content-wrapper">
      <router-outlet></router-outlet>
    </div>

  </mat-sidenav-content>

</mat-sidenav-container>